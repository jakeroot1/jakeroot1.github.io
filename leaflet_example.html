<!DOCTYPE html>
<html>
	<body>
	<head>
		<title>Welcome home -- jakeroot</title>
		<link href="styles.css" rel="stylesheet" type="text/css">
	</head>
		<h1>Jacob Root: Urban Geographer</h1>
		<form action="index.html">
			<button class="tablink" type="submit">Home</button>
		</form>
		<form action="maps.html">
			<button class="tablink" type="submit">Maps</button>
		</form>
    <form action="leaflet_example.html">
      <button class="tablinkactive" type="submit">Leaflet Maps</button>
    </form>
		<form action="about.html">
			<button class="tablink" type="submit">About & Contact</button>
		</form>

    <div id="legend">
    		<h3><center>Earthquake magnitude</center></h3>
    		<ul style="list-style-type:none">
    			<li>
    				<svg width="24" height="24">
    					<circle cx="12" cy="20" r="2" stroke="red" stroke-width="3" fill="red" fill-opacity=".4"/>
    				</svg>
    				<text>Less than 1</text>
    			</li>
    			<li>
    				<svg width="24" height="24">
    					<circle cx="12" cy="18" r="4" stroke="red" stroke-width="3" fill="red" fill-opacity=".4"/>
    				</svg>
    				<text>Between 1 and 2.5</text>
    			</li>
    			<li>
    				<svg width="24" height="24">
    					<circle cx="12" cy="14" r="6" stroke="red" stroke-width="3" fill="red" fill-opacity=".4"/>
    				</svg>
    				<text>Between 2.5 and 4.5</text>
    			</li>
    			<li>
    				<svg width="24" height="24">
    					<circle cx="12" cy="12" r="10" stroke="red" stroke-width="3" fill="red" fill-opacity=".4"/>
    				</svg>
    				<text x="0" y="0)">Greater than 4.5</text>
    			</li>
    		</ul>
    	</div>

    	<script>
    		var mymap = L.map('map').setView([0, 0], 2);
    		var basemap = L.tileLayer('https://stamen-tiles-{s}.a.ssl.fastly.net/terrain/{z}/{x}/{y}{r}.png', {
    			attribution: 'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',
    		}).addTo(mymap);
    		// load GeoJSON from an external file and add it to the map
    		$.getJSON("https://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/all_day.geojson",function(data){
    	// add GeoJSON layer to the map once the file is loaded
    		L.geoJson(data, {
    			pointToLayer: function(feature, latlng){
                    		var radiusSize,
    				mag = feature.properties.mag;
                    			if (mag > 4.5) radiusSize = 10;
    					else if ( mag > 2.5) radiusSize = 6;
                    			else if (mag > 1) radiusSize = 4;
    					else radiusSize = 2;
                    		var marker = L.circleMarker(latlng, {radius: radiusSize, color: 'red'});
    				marker.bindPopup("Location: " + feature.properties.place + "<br>Magnitude: " + feature.properties.mag + "<br><a href =" + feature.properties.url +">More info</a>");
    				return marker;
    			}
    		}).addTo(mymap);
    });
    var Legend =  new L.Control.Legend({
    position: 'bottomright',
    });

    mymap.addControl(Legend);
    $(".legend-container").append( $("#legend") );
    	</script>

	</body>
</html>
